# Makefile para Linux - Sistema Aquário
CXX = g++
CXXFLAGS = -std=c++14 -Wall -Wextra
LDFLAGS = -lncurses

# Arquivos fonte
SOURCES_NOTICIA = Data.cpp Avisos.cpp fofoca.cpp Humor.cpp StackOverflow.cpp Anonimo.cpp
SOURCES_CONTROLE = Controle.cpp
SOURCES_ALL = $(SOURCES_NOTICIA) $(SOURCES_CONTROLE)

# Objetos
OBJECTS_NOTICIA = $(SOURCES_NOTICIA:.cpp=.o)
OBJECTS_CONTROLE = $(SOURCES_CONTROLE:.cpp=.o)
OBJECTS_ALL = $(SOURCES_ALL:.cpp=.o)

# Executável final
TARGET = aquario

# Regra principal - compila tudo
all: $(TARGET)

# Cria o executável
$(TARGET): $(OBJECTS_ALL) main.o
	$(CXX) $(CXXFLAGS) -o $@ $^ $(LDFLAGS)
	@echo "✅ Sistema Aquário compilado com sucesso!"

# Compila apenas as classes de notícia
noticias: $(OBJECTS_NOTICIA)
	@echo "✅ Classes de notícia compiladas!"

# Compila apenas o controle
controle: $(OBJECTS_CONTROLE)
	@echo "✅ Classe Controle compilada!"

# Regra para objetos individuais
%.o: %.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

# Teste de compilação
test: $(OBJECTS_ALL)
	@echo "✅ Teste de compilação bem-sucedido!"
	@echo "Objetos gerados: $(OBJECTS_ALL)"

# Executa o programa
run: $(TARGET)
	./$(TARGET)

# Limpeza
clean:
	rm -f $(OBJECTS_ALL) main.o $(TARGET)

distclean: clean
	@echo "Limpeza completa realizada!"

# Ajuda
help:
	@echo "Comandos disponíveis:"
	@echo "  make          - Compila todo o sistema"
	@echo "  make noticias - Compila apenas classes de notícia"
	@echo "  make controle - Compila apenas classe Controle"
	@echo "  make test     - Testa compilação"
	@echo "  make run      - Compila e executa o programa"
	@echo "  make clean    - Remove arquivos objeto e executável"
	@echo "  make help     - Mostra esta ajuda"

.PHONY: all noticias controle test run clean distclean help
